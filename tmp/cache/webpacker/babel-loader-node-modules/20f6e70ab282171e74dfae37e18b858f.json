{"ast":null,"code":"import { Users, User, UsersCollection } from \"../BackboneModel/user_model\";\nimport { UsersChatroom } from \"../BackboneModel/users_chatroom_model\";\nimport { Match, Matchs } from \"../BackboneModel/matchs_model\";\nimport { Chatroom } from \"../BackboneModel/chat_list_model\";\nimport { router } from \"../BackboneRouter/application_router\";\nvar MatchView = Backbone.View.extend({\n  render: function render() {\n    var guilds_or_tournament;\n\n    if (this.model.get(\"my_guild\") != undefined) {\n      guilds_or_tournament = '<p class=\"pstat-guilds\">(' + this.model.get(\"my_guild\") + ' üÜö ' + this.model.get(\"enemy_guild\") + ')</p>';\n    } else if (this.model.get(\"tournament_name\") != undefined) {\n      guilds_or_tournament = '<p class=\"pstat-tournament\">(tournament:' + this.model.get(\"tournament_name\") + ')</p>';\n    } else {\n      guilds_or_tournament = '';\n    }\n\n    this.$el.html('<li class=\"match-li\">\\\n        <p class=\"pstat-win-or-lose\">' + (this.model.get(\"i_win\") == true ? 'üëç' : 'üëé') + '</p>\\\n        <p class=\"pstat-score\">' + this.model.get(\"my_score\") + '/' + this.model.get(\"enemy_score\") + '</p>\\\n        <p class=\"pstat-opponent\">adversaire: ' + this.model.get(\"enemy_pseudo\") + '</p>' + guilds_or_tournament + '</li>');\n    return this;\n  }\n});\nvar ProfilView = Backbone.View.extend({\n  events: {\n    \"click #streamin\": \"streamParty\"\n  },\n  render: function render(self, e) {\n    if (self.ProfilIsOpen == false) {\n      var matchs = new Matchs();\n      matchs.fetch({\n        data: {\n          pseudo: $(e.currentTarget).html()\n        }\n      }).then(function () {\n        var user = new User({\n          id: $(e.currentTarget).html()\n        });\n        user.fetch({\n          data: {\n            pseudo: true\n          }\n        }).then(function () {\n          self.ProfilIsOpen = true;\n          var img_url = user.get(\"url\");\n\n          if (img_url == \"\") {\n            img_url = 'https://images04.military.com/sites/default/files/styles/full/public/media/news/conflicts/2015/04/pro-russian-tank-600.jpg?itok=FPZYi7nD';\n          }\n\n          $(\".Center\").append('<div class=\"PopUp\" id=\"popup-profil\">\\\n                    <input type=\"button\" class=\"popup-social-hover\" id=\"popup-chatroom-administration-quit\" value=\"‚úñ\"></input>\\\n                    <h2 id=\"title-popup-chatroom-pannel\">' + $(e.currentTarget).html() + '</h2>\\\n                    <img id=\"profil-image-user\" src=\"' + img_url + '\">\\\n                    <div id=\"player-stat\">\\\n                    <p>guild: ' + user.get(\"guild_name\") + '</p>\\\n                    <p>nombre de parties gagn√©es: ' + user.get(\"win\") + '</p>\\\n                    <p>nombre de parties perdues: ' + user.get(\"loss\") + '</p>\\\n                    <p>ladder level: ' + user.get(\"rank\") + '</p>\\\n                    <p>nombre de tournois remport√©s: ' + user.get(\"tournaments_win\") + '</p>\\\n                    </div>\\\n                    <h2>historique des parties</h2>\\\n                    <ul id=\"player-dual-historic\">\\\n                    </ul>\\\n                    <input id=\"streamin\" type=\"button\" value=\"stream game\"></input>\\\n                    </div>');\n          $(\"#streamin\").hide();\n          axios.get(\"/api/games/id=True?user_pseudo=\".concat($(e.currentTarget).html())).then(function (res) {\n            if (res.data[\"game\"] == true) {\n              $(\"#streamin\").show();\n            }\n\n            $(\"#streamin\").click(function () {\n              router.navigate(\"connected/game?game_id=\".concat(res.data[\"id\"]), {\n                trigger: true\n              });\n            });\n          });\n          matchs.each(function (match) {\n            var matchView = new MatchView({\n              model: match\n            });\n            $(\"ul#player-dual-historic\").append(matchView.render().$el);\n          });\n\n          var removePopup = function removePopup() {\n            self.ProfilIsOpen = false;\n            $(\".PopUp\").remove();\n          };\n\n          self.mouseIn = false;\n          $(\".PopUp\").hover(function () {\n            self.mouseIn = true;\n          }, function () {\n            self.mouseIn = false;\n          });\n          $(\"body\").mouseup(function () {\n            if (self.mouseIn == false) removePopup();\n          });\n          $(\"#popup-chatroom-administration-refresh\").click(function () {\n            self.render();\n          });\n          $(\"#popup-chatroom-administration-quit\").click(function () {\n            removePopup();\n          });\n        });\n      });\n    }\n  }\n});\nexport { ProfilView };","map":{"version":3,"sources":["/home/mathis/Documents/no_docker/app/javascript/BackboneViews/ProfilView.js"],"names":["Users","User","UsersCollection","UsersChatroom","Match","Matchs","Chatroom","router","MatchView","Backbone","View","extend","render","guilds_or_tournament","model","get","undefined","$el","html","ProfilView","events","self","e","ProfilIsOpen","matchs","fetch","data","pseudo","$","currentTarget","then","user","id","img_url","append","hide","axios","res","show","click","navigate","trigger","each","match","matchView","removePopup","remove","mouseIn","hover","mouseup"],"mappings":"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","sourcesContent":["import { Users, User, UsersCollection } from \"../BackboneModel/user_model\"\nimport { UsersChatroom } from \"../BackboneModel/users_chatroom_model\"\nimport { Match, Matchs } from \"../BackboneModel/matchs_model\"\nimport { Chatroom } from \"../BackboneModel/chat_list_model\"\nimport { router } from \"../BackboneRouter/application_router\"\n\nvar MatchView = Backbone.View.extend({\n    render: function () {\n        var guilds_or_tournament;\n        if (this.model.get(\"my_guild\") != undefined) {\n            guilds_or_tournament = '<p class=\"pstat-guilds\">(' + this.model.get(\"my_guild\") + ' üÜö ' + this.model.get(\"enemy_guild\") + ')</p>'\n        } else if (this.model.get(\"tournament_name\") != undefined) {\n            guilds_or_tournament = '<p class=\"pstat-tournament\">(tournament:' + this.model.get(\"tournament_name\") + ')</p>'\n        } else {\n            guilds_or_tournament = '';\n        }\n        this.$el.html('<li class=\"match-li\">\\\n        <p class=\"pstat-win-or-lose\">' + (this.model.get(\"i_win\") == true ? 'üëç' : 'üëé') + '</p>\\\n        <p class=\"pstat-score\">' + this.model.get(\"my_score\") + '/' + this.model.get(\"enemy_score\") + '</p>\\\n        <p class=\"pstat-opponent\">adversaire: ' + this.model.get(\"enemy_pseudo\") + '</p>' +\n            guilds_or_tournament +\n            '</li>')\n        return this;\n    }\n})\n\nvar ProfilView = Backbone.View.extend({\n    events: {\n        \"click #streamin\": \"streamParty\"\n    },\n    render: function (self, e) {\n        if (self.ProfilIsOpen == false) {\n            var matchs = new Matchs()\n            matchs.fetch({ data: { pseudo: $(e.currentTarget).html() } }).then(function () {\n                var user = new User({ id: $(e.currentTarget).html() })\n                user.fetch({ data: { pseudo: true } }).then(function () {\n\n                    self.ProfilIsOpen = true;\n                    var img_url = user.get(\"url\");\n                    if (img_url == \"\") {\n                        img_url = 'https://images04.military.com/sites/default/files/styles/full/public/media/news/conflicts/2015/04/pro-russian-tank-600.jpg?itok=FPZYi7nD'\n                    }\n                    $(\".Center\").append('<div class=\"PopUp\" id=\"popup-profil\">\\\n                    <input type=\"button\" class=\"popup-social-hover\" id=\"popup-chatroom-administration-quit\" value=\"‚úñ\"></input>\\\n                    <h2 id=\"title-popup-chatroom-pannel\">' + $(e.currentTarget).html() + '</h2>\\\n                    <img id=\"profil-image-user\" src=\"' + img_url + '\">\\\n                    <div id=\"player-stat\">\\\n                    <p>guild: ' + user.get(\"guild_name\") + '</p>\\\n                    <p>nombre de parties gagn√©es: ' + user.get(\"win\") + '</p>\\\n                    <p>nombre de parties perdues: ' + user.get(\"loss\") + '</p>\\\n                    <p>ladder level: ' + user.get(\"rank\") + '</p>\\\n                    <p>nombre de tournois remport√©s: ' + user.get(\"tournaments_win\") + '</p>\\\n                    </div>\\\n                    <h2>historique des parties</h2>\\\n                    <ul id=\"player-dual-historic\">\\\n                    </ul>\\\n                    <input id=\"streamin\" type=\"button\" value=\"stream game\"></input>\\\n                    </div>');\n                    $(\"#streamin\").hide()\n                    axios.get(`/api/games/id=True?user_pseudo=${$(e.currentTarget).html()}`).then((res) => {\n                        if (res.data[\"game\"] == true) {\n                            $(\"#streamin\").show()\n                        }\n                        $(\"#streamin\").click(() => {\n                            router.navigate(`connected/game?game_id=${res.data[\"id\"]}`, { trigger: true });\n                        });\n                    })\n\n                    matchs.each(function (match) {\n                        var matchView = new MatchView({ model: match })\n                        $(\"ul#player-dual-historic\").append(matchView.render().$el);\n                    })\n\n                    var removePopup = function () {\n                        self.ProfilIsOpen = false;\n                        $(\".PopUp\").remove()\n                    }\n\n                    self.mouseIn = false;\n\n                    $(\".PopUp\").hover(function () {\n                        self.mouseIn = true;\n                    }, function () {\n                        self.mouseIn = false;\n                    });\n\n                    $(\"body\").mouseup(function () {\n                        if (self.mouseIn == false)\n                            removePopup();\n                    });\n\n                    $(\"#popup-chatroom-administration-refresh\").click(function () {\n                        self.render();\n                    });\n\n                    $(\"#popup-chatroom-administration-quit\").click(function () {\n                        removePopup();\n                    });\n                });\n            })\n        }\n    }\n})\n\nexport { ProfilView }"]},"metadata":{},"sourceType":"module"}