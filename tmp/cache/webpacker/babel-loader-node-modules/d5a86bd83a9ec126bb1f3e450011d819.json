{"ast":null,"code":"import { GameModel } from \"../BackboneModel/game_model\";\nimport { getUrlParam } from \"../utils/utils_1\";\nimport { game_channel } from \"../channels/game_channel\";\nimport consumer from \"../channels/consumer\";\nimport { router } from \"../BackboneRouter/application_router\";\nvar interval;\nvar GameContent = Backbone.View.extend({\n  events: {\n    \"click #menu\": \"launch_game\",\n    \"keyup\": \"keyup_event\",\n    \"keydown\": \"keydown_event\"\n  },\n  render: function render() {\n    var _this = this;\n\n    var game_id = getUrlParam(\"game_id\");\n    var game = new GameModel({\n      id: game_id\n    });\n    game.fetch().then(function (res) {\n      _this.$el.html(\"\\n            <div id=\\\"flex_div\\\">\\n            <div id=\\\"top\\\">\\n            <h2 id=\\\"score\\\"> <span id=\\\"player1\\\">\".concat(res[\"player_1\"], \"</span>: <span id=\\\"scoreP1\\\">0</span> <span class=\\\"VS\\\">VS</span> <span id=\\\"player2\\\">\").concat(res[\"player_2\"], \"</span>: <span id=\\\"scoreP2\\\">0</span></h2>\\n            <h1 id=\\\"menu\\\"></h1>\\n            </div>\\n            <canvas id=\\\"pongBoard\\\" width=750 height=750> </canvas>\\n            </div>\\n            \"));\n\n      if (Cookies.get(\"pseudo\") != res[\"player_1\"] && Cookies.get(\"pseudo\") != res[\"player_2\"]) var guest = true;else var guest = false;\n      _this.socket = game_channel(guest, res[\"player_1\"], _this);\n      return _this;\n    });\n  },\n  end_game: function end_game() {\n    var _this2 = this;\n\n    this.socket.unsubscribe();\n    clearInterval(interval);\n    var winner;\n    if (this.p1.score == 10) winner = $(\"#player1\").text();else winner = $(\"#player2\").text();\n    $(\"#score\").hide();\n    if ($(\".BackClick\").length == 0) $(\"body\").append(\"<div class=\\\"BackClick\\\"></div>\");\n    if ($(\"#partyEnding\").length == 0) $(\".Center\").append(\"\\n                <div class=\\\"PopUp\\\" id=\\\"partyEnding\\\">\\n                    <h1> \".concat(winner, \" <span style=\\\"color: green\\\">WIN</span> THE GAME </h1>\\n                    <button id=\\\"endMatchButton\\\"> Go back to menu </button>\\n                </div>\\n            \"));\n    $(\".BackClick\").click(function () {\n      _this2.end = false;\n      router.navigate(\"connected/play\", {\n        trigger: true\n      });\n      $(\".BackClick\").remove();\n    });\n    $(\"#endMatchButton\").click(function () {\n      _this2.end = false;\n      router.navigate(\"connected/play\", {\n        trigger: true\n      });\n      $(\".BackClick\").remove();\n    });\n  }\n});\nvar gameContent = new GameContent({\n  el: \".Center\"\n});\nexport { gameContent };","map":{"version":3,"sources":["/home/mathis/Documents/no_docker/app/javascript/BackboneViews/GameView.js"],"names":["GameModel","getUrlParam","game_channel","consumer","router","interval","GameContent","Backbone","View","extend","events","render","game_id","game","id","fetch","then","res","$el","html","Cookies","get","guest","socket","end_game","unsubscribe","clearInterval","winner","p1","score","$","text","hide","length","append","click","end","navigate","trigger","remove","gameContent","el"],"mappings":"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","sourcesContent":["import {GameModel} from \"../BackboneModel/game_model\"\nimport {getUrlParam} from \"../utils/utils_1\"\nimport {game_channel} from \"../channels/game_channel\"\nimport consumer from \"../channels/consumer\"\nimport {router} from \"../BackboneRouter/application_router\"\n\nvar interval;\n\nvar GameContent = Backbone.View.extend({\n    events: {\n        \"click #menu\" : \"launch_game\",\n        \"keyup\" : \"keyup_event\",\n        \"keydown\" : \"keydown_event\",\n    },\n    render: function ()\n    {\n        var game_id = getUrlParam(\"game_id\");\n        var game = new GameModel({id: game_id});\n        game.fetch().then((res)=>{\n            this.$el.html(`\n            <div id=\"flex_div\">\n            <div id=\"top\">\n            <h2 id=\"score\"> <span id=\"player1\">${res[\"player_1\"]}</span>: <span id=\"scoreP1\">0</span> <span class=\"VS\">VS</span> <span id=\"player2\">${res[\"player_2\"]}</span>: <span id=\"scoreP2\">0</span></h2>\n            <h1 id=\"menu\"></h1>\n            </div>\n            <canvas id=\"pongBoard\" width=750 height=750> </canvas>\n            </div>\n            `);\n            if (Cookies.get(\"pseudo\") != res[\"player_1\"] && Cookies.get(\"pseudo\") != res[\"player_2\"])\n                var guest = true\n            else\n                var guest = false\n            this.socket = game_channel(guest, res[\"player_1\"], this);\n            return this;\n        });\n    },\n    end_game: function ()\n    {\n        this.socket.unsubscribe();\n        clearInterval(interval);\n        var winner;\n        if (this.p1.score == 10)\n            winner = $(\"#player1\").text();\n        else\n            winner = $(\"#player2\").text();\n        $(\"#score\").hide();\n        if ($(\".BackClick\").length == 0)\n            $(\"body\").append(`<div class=\"BackClick\"></div>`);\n        if ($(\"#partyEnding\").length == 0)\n            $(\".Center\").append(`\n                <div class=\"PopUp\" id=\"partyEnding\">\n                    <h1> ${winner} <span style=\"color: green\">WIN</span> THE GAME </h1>\n                    <button id=\"endMatchButton\"> Go back to menu </button>\n                </div>\n            `);\n        $(\".BackClick\").click(()=>{\n            this.end = false;\n            router.navigate(\"connected/play\", {trigger: true});\n            $(\".BackClick\").remove();\n        });\n        $(\"#endMatchButton\").click(()=>{\n            this.end = false;\n            router.navigate(\"connected/play\", {trigger: true});\n            $(\".BackClick\").remove();\n        })\n    }\n});\n\nvar gameContent = new GameContent({el: \".Center\"});\n\nexport {gameContent};"]},"metadata":{},"sourceType":"module"}