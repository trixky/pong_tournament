{"ast":null,"code":"import { Tournament, Tournaments } from \"../BackboneModel/tournament_model\";\nimport { Battle, Battles } from \"../BackboneModel/battle_list_model\";\nimport { UserTourament, UsersTourament } from \"../BackboneModel/users_tournament_model\";\nvar Tournament_matching_popup = Backbone.View.extend({\n  render: function render(self) {\n    if (self.matchingPopupIsOpen == false) {\n      $(\".Center\").append('<div class=\"PopUp\" id=\"popup-profil\">\\\n                <input type=\"button\" class=\"popup-social-hover\" id=\"popup-chatroom-administration-quit\" value=\"✖\"></input>' + '<input type=\"button\" class=\"popup-social-hover\" id=\"popup-chatroom-administration-refresh\" value=\"⟳\"></input>\\\n                <h2 id=\"title-popup-chatroom-pannel\">' + 'search match' + '</h2>\\\n                <img id=\"img-chargement-gif\" src=\"https://thumbs.gfycat.com/KnobbyWeirdIlladopsis-size_restricted.gif\"><image>\\\n                </div>');\n\n      var removePopup = function removePopup() {\n        self.ProfilIsOpen = false;\n        var battle = new Battle({\n          id: 'tournament'\n        });\n        battle.destroy({\n          data: {\n            type_battle: 'tournament'\n          },\n          processData: true\n        }).then(function () {\n          $(\".PopUp\").remove();\n        });\n      };\n\n      self.mouseIn = false;\n      $(\".PopUp\").hover(function () {\n        self.mouseIn = true;\n      }, function () {\n        self.mouseIn = false;\n      });\n      $(\"body\").mouseup(function () {\n        if (self.mouseIn == false) removePopup();\n      });\n      $(\"#popup-chatroom-administration-quit\").click(function () {\n        removePopup();\n      });\n    }\n\n    ;\n  }\n});\nvar matching_popup = new Tournament_matching_popup();\nvar TournamentPersoView = Backbone.View.extend({\n  render: function render() {\n    var now = new Date();\n    var start_at = new Date(this.model.get(\"start_at\"));\n\n    if (now > start_at) {\n      var end_at = new Date(this.model.get(\"start_at\"));\n      var end_at_string = end_at.getDate() + '/' + end_at.getMonth() + '/' + end_at.getFullYear() + '  ' + end_at.getHours() + ':' + end_at.getMinutes();\n      $(\"#tournament-perso-div\").append('<div class=\"tournament-perso-list\">\\\n                <p class=\"tournament-perso-list-name\">' + this.model.get(\"name\") + '</p>\\\n                <p class=\"tournament-perso-list-prize\">prize: ' + this.model.get(\"prize\") + '</p>\\\n                <p class=\"tournament-perso-list-prize\">my points: ' + this.model.get(\"my_points\") + '</p>\\\n                <p class=\"tournament-perso-list-rank\">my rank: ' + this.model.get(\"my_rank\") + '/' + this.model.get(\"participants_number\") + '</p>\\\n                <p class=\"tournament-perso-list-end_at\">tournament end : ' + end_at_string + '</p>\\\n                <div class=\"tournament-perso-list-button\">\\\n                    <input class=\"tournament-perso-battle-button social-hover\" type=\"button\" value=\"⚔ battle ⚔\"></input>\\\n                    <input class=\"tournament-perso-unsubscribe-button social-hover\" type=\"button\" value=\"unsubscribe\"></input>\\\n                </div>\\\n            </div>');\n    } else {\n      var start_at = new Date(this.model.get(\"start_at\"));\n      var start_at_string = start_at.getDate() + '/' + start_at.getMonth() + '/' + start_at.getFullYear() + '  ' + start_at.getHours() + ':' + start_at.getMinutes();\n      $(\"#tournament-perso-div\").append('<div class=\"tournament-perso-list\">\\\n                <p class=\"tournament-perso-list-name\">' + this.model.get(\"name\") + '</p>\\\n                <p class=\"tournament-perso-list-prize\">' + this.model.get(\"prize\") + '</p>\\\n                <p class=\"tournament-perso-list-end_at\">tournament start : ' + start_at_string + '</p>\\\n                <div class=\"tournament-perso-list-button\">\\\n                    <input class=\"tournament-perso-unsubscribe-button social-hover\" type=\"button\" value=\"unsubscribe\"></input>\\\n                </div>\\\n            </div>');\n    }\n  }\n});\nvar TournamentPersoJoinView = Backbone.View.extend({\n  render: function render() {\n    var now = new Date();\n    var start_registration = new Date(this.model.get(\"start_registration\"));\n    var end_registration = new Date(this.model.get(\"end_registration\"));\n    var start_registration_string = start_registration.getDate() + '/' + start_registration.getMonth() + '/' + start_registration.getFullYear() + '  ' + start_registration.getHours() + ':' + start_registration.getMinutes();\n    var end_registration_string = end_registration.getDate() + '/' + end_registration.getMonth() + '/' + end_registration.getFullYear() + '  ' + end_registration.getHours() + ':' + end_registration.getMinutes();\n    var start_at = new Date(this.model.get(\"start_at\"));\n    var start_at_string = start_at.getDate() + '/' + start_at.getMonth() + '/' + start_at.getFullYear() + '  ' + start_at.getHours() + ':' + start_at.getMinutes();\n    var end_at = new Date(this.model.get(\"start_at\"));\n    var end_at_string = end_at.getDate() + '/' + end_at.getMonth() + '/' + end_at.getFullYear() + '  ' + end_at.getHours() + ':' + end_at.getMinutes();\n\n    if (now < end_registration) {\n      if (now > start_registration) {\n        $(\"#tournament-join-div\").append('<div class=\"tournament-perso-list\">\\\n                    <p class=\"tournament-perso-list-name\">' + this.model.get(\"name\") + '</p>\\\n                    <p class=\"tournament-perso-list-prize\">' + this.model.get(\"prize\") + '</p>\\\n                    <div>\\\n                        <p class=\"tournament-perso-list-end_at\">registration start : ' + start_registration_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">registration end : ' + end_registration_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">tournament start : ' + start_at_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">tournament end : ' + end_at_string + '</p>\\\n                    </div>\\\n                    <div class=\"tournament-perso-list-button\">\\\n                        <input class=\"tournament-perso-register-button social-hover\" type=\"button\" value=\"register\"></input>\\\n                    </div>\\\n                </div>');\n      } else {\n        $(\"#tournament-join-div\").append('<div class=\"tournament-perso-list\">\\\n                    <p class=\"tournament-perso-list-name\">' + this.model.get(\"name\") + '</p>\\\n                    <p class=\"tournament-perso-list-prize\">' + this.model.get(\"prize\") + '</p>\\\n                    <div>\\\n                        <p class=\"tournament-perso-list-end_at\">registration start : ' + start_registration_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">registration end : ' + end_registration_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">tournament start : ' + start_at_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">tournament end : ' + end_at_string + '</p>\\\n                    </div>\\\n                    <div class=\"tournament-perso-list-button\">\\\n                        <input class=\"tournament-perso-register-button social-hover\" type=\"button\" value=\"register\"disabled></input>\\\n                    </div>\\\n                </div>');\n      }\n    }\n  }\n});\nvar TournamentContentView = Backbone.View.extend({\n  render: function render() {\n    var self = this;\n    self.matchingPopupIsOpen = false;\n    $(\".Center\").html('<div id=\"tournament-div\">\\\n            <div id=\"tournament-main-div\">\\\n                <h2>Main tournament</h2>\\\n                <input class=\"social-hover\" id=\"start-main-tournament-classed-battle\" type=\"button\" value=\"⚔ classed ⚔\"></input>\\\n                <input class=\"social-hover\" id=\"start-main-tournament-unclassed-battle\" type=\"button\" value=\"⚔ unclassed ⚔\"></input>\\\n            </div>\\\n            <div id=\"tournament-perso-div\">\\\n            </div>\\\n            <div id=\"tournament-join-div\">\\\n            </div>\\\n        </div>');\n    $(\"#start-main-tournament-classed-battle\").click(function () {\n      var battle = new Battle({\n        type_battle: 'main-classed'\n      });\n      battle.save().then(function () {\n        matching_popup.render(self);\n      });\n    });\n    $(\"#start-main-tournament-unclassed-battle\").click(function () {\n      var battle = new Battle({\n        type_battle: 'main-unclassed'\n      });\n      battle.save().then(function () {\n        matching_popup.render(self);\n      });\n    });\n    $(\"#start-main-tournament-unclassed-battle\").click(function () {});\n\n    var refresh_tournament_perso = function refresh_tournament_perso() {\n      var tournaments = new Tournaments();\n      tournaments.fetch({\n        data: {\n          perso: \"true\"\n        }\n      }).then(function () {\n        $(\"#tournament-perso-div\").html(\"<h2>My tournaments</h2>\");\n        tournaments.each(function (tournament) {\n          if (tournament.get(\"main_tournament\") == undefined || tournament.get(\"main_tournament\") == false) {\n            var tournamentPersoView = new TournamentPersoView({\n              model: tournament\n            });\n            tournamentPersoView.render();\n          }\n        });\n        $(\".tournament-perso-unsubscribe-button\").click(function (e) {\n          var tournament_name;\n\n          if ($(e.currentTarget).prev().val() == \"⚔ battle ⚔\") {\n            tournament_name = $(e.currentTarget).parent().prev().prev().prev().prev().prev().html();\n          } else {\n            tournament_name = $(e.currentTarget).parent().prev().prev().prev().prev().html();\n          }\n\n          var userTourament = new UserTourament({\n            id: tournament_name\n          });\n          userTourament.destroy().then(function () {\n            refresh_tournament_perso();\n            refresh_tournament_perso_join();\n          });\n        });\n        $(\".tournament-perso-battle-button\").click(function (e) {\n          var battle = new Battle({\n            type_battle: 'perso-classed',\n            tournament_name: $(e.currentTarget).parent().prev().prev().prev().prev().prev().html()\n          });\n          battle.save().then(function () {\n            matching_popup.render(self);\n          });\n        });\n      });\n    };\n\n    var refresh_tournament_perso_join = function refresh_tournament_perso_join() {\n      var tournaments = new Tournaments();\n      tournaments.fetch({\n        data: {\n          join: \"true\"\n        }\n      }).then(function () {\n        $(\"#tournament-join-div\").html(\"<h2>Join tournament</h2>\");\n        tournaments.each(function (tournament) {\n          if (tournament.get(\"main_tournament\") == undefined || tournament.get(\"main_tournament\") == false) {\n            var tournamentPersoJoinView = new TournamentPersoJoinView({\n              model: tournament\n            });\n            tournamentPersoJoinView.render();\n          }\n        });\n        $(\".tournament-perso-register-button\").click(function (e) {\n          var userTourament = new UserTourament({\n            tournament_name: $(e.currentTarget).parent().prev().prev().prev().html()\n          });\n          userTourament.save().then(function () {\n            refresh_tournament_perso();\n            refresh_tournament_perso_join();\n          });\n        });\n      });\n    };\n\n    refresh_tournament_perso();\n    refresh_tournament_perso_join();\n    return this;\n  }\n});\nvar tournamentContent = new TournamentContentView({\n  el: \".Menu\"\n});\nexport { tournamentContent };","map":{"version":3,"sources":["/home/mathis/Documents/no_docker/app/javascript/BackboneViews/TournamentView.js"],"names":["Tournament","Tournaments","Battle","Battles","UserTourament","UsersTourament","Tournament_matching_popup","Backbone","View","extend","render","self","matchingPopupIsOpen","$","append","removePopup","ProfilIsOpen","battle","id","destroy","data","type_battle","processData","then","remove","mouseIn","hover","mouseup","click","matching_popup","TournamentPersoView","now","Date","start_at","model","get","end_at","end_at_string","getDate","getMonth","getFullYear","getHours","getMinutes","start_at_string","TournamentPersoJoinView","start_registration","end_registration","start_registration_string","end_registration_string","TournamentContentView","html","save","refresh_tournament_perso","tournaments","fetch","perso","each","tournament","undefined","tournamentPersoView","e","tournament_name","currentTarget","prev","val","parent","userTourament","refresh_tournament_perso_join","join","tournamentPersoJoinView","tournamentContent","el"],"mappings":"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","sourcesContent":["import { Tournament, Tournaments } from \"../BackboneModel/tournament_model\"\nimport { Battle, Battles } from \"../BackboneModel/battle_list_model\"\nimport { UserTourament, UsersTourament } from \"../BackboneModel/users_tournament_model\"\n\nvar Tournament_matching_popup = Backbone.View.extend({\n    render: function (self) {\n        if (self.matchingPopupIsOpen == false) {\n            $(\".Center\").append('<div class=\"PopUp\" id=\"popup-profil\">\\\n                <input type=\"button\" class=\"popup-social-hover\" id=\"popup-chatroom-administration-quit\" value=\"✖\"></input>' +\n                '<input type=\"button\" class=\"popup-social-hover\" id=\"popup-chatroom-administration-refresh\" value=\"⟳\"></input>\\\n                <h2 id=\"title-popup-chatroom-pannel\">' + 'search match' + '</h2>\\\n                <img id=\"img-chargement-gif\" src=\"https://thumbs.gfycat.com/KnobbyWeirdIlladopsis-size_restricted.gif\"><image>\\\n                </div>');\n\n            var removePopup = function () {\n                self.ProfilIsOpen = false;\n                var battle = new Battle({ id: 'tournament' })\n                battle.destroy({ data: { type_battle: 'tournament' }, processData: true }).then(function () {\n                    $(\".PopUp\").remove()\n                })\n            }\n\n            self.mouseIn = false;\n\n            $(\".PopUp\").hover(function () {\n                self.mouseIn = true;\n            }, function () {\n                self.mouseIn = false;\n            });\n\n            $(\"body\").mouseup(function () {\n                if (self.mouseIn == false)\n                    removePopup();\n            });\n\n            $(\"#popup-chatroom-administration-quit\").click(function () {\n                removePopup();\n            });\n        };\n    }\n})\n\nvar matching_popup = new Tournament_matching_popup();\n\nvar TournamentPersoView = Backbone.View.extend({\n    render: function () {\n        var now = new Date();\n        var start_at = new Date(this.model.get(\"start_at\"))\n\n        if (now > start_at) {\n            var end_at = new Date(this.model.get(\"start_at\"))\n            var end_at_string = end_at.getDate() + '/' + end_at.getMonth() + '/' + end_at.getFullYear() + '  ' + end_at.getHours() + ':' + end_at.getMinutes();\n\n            $(\"#tournament-perso-div\").append('<div class=\"tournament-perso-list\">\\\n                <p class=\"tournament-perso-list-name\">' + this.model.get(\"name\") + '</p>\\\n                <p class=\"tournament-perso-list-prize\">prize: ' + this.model.get(\"prize\") + '</p>\\\n                <p class=\"tournament-perso-list-prize\">my points: ' + this.model.get(\"my_points\") + '</p>\\\n                <p class=\"tournament-perso-list-rank\">my rank: ' + this.model.get(\"my_rank\") + '/' + this.model.get(\"participants_number\") + '</p>\\\n                <p class=\"tournament-perso-list-end_at\">tournament end : ' + end_at_string + '</p>\\\n                <div class=\"tournament-perso-list-button\">\\\n                    <input class=\"tournament-perso-battle-button social-hover\" type=\"button\" value=\"⚔ battle ⚔\"></input>\\\n                    <input class=\"tournament-perso-unsubscribe-button social-hover\" type=\"button\" value=\"unsubscribe\"></input>\\\n                </div>\\\n            </div>')\n        } else {\n            var start_at = new Date(this.model.get(\"start_at\"))\n            var start_at_string = start_at.getDate() + '/' + start_at.getMonth() + '/' + start_at.getFullYear() + '  ' + start_at.getHours() + ':' + start_at.getMinutes();\n            $(\"#tournament-perso-div\").append('<div class=\"tournament-perso-list\">\\\n                <p class=\"tournament-perso-list-name\">' + this.model.get(\"name\") + '</p>\\\n                <p class=\"tournament-perso-list-prize\">' + this.model.get(\"prize\") + '</p>\\\n                <p class=\"tournament-perso-list-end_at\">tournament start : ' + start_at_string + '</p>\\\n                <div class=\"tournament-perso-list-button\">\\\n                    <input class=\"tournament-perso-unsubscribe-button social-hover\" type=\"button\" value=\"unsubscribe\"></input>\\\n                </div>\\\n            </div>')\n        }\n    }\n})\n\nvar TournamentPersoJoinView = Backbone.View.extend({\n    render: function () {\n        var now = new Date();\n\n        var start_registration = new Date(this.model.get(\"start_registration\"))\n        var end_registration = new Date(this.model.get(\"end_registration\"))\n\n        var start_registration_string = start_registration.getDate() + '/' + start_registration.getMonth() + '/' + start_registration.getFullYear() + '  ' + start_registration.getHours() + ':' + start_registration.getMinutes();\n        var end_registration_string = end_registration.getDate() + '/' + end_registration.getMonth() + '/' + end_registration.getFullYear() + '  ' + end_registration.getHours() + ':' + end_registration.getMinutes();\n\n        var start_at = new Date(this.model.get(\"start_at\"))\n        var start_at_string = start_at.getDate() + '/' + start_at.getMonth() + '/' + start_at.getFullYear() + '  ' + start_at.getHours() + ':' + start_at.getMinutes();\n\n        var end_at = new Date(this.model.get(\"start_at\"))\n        var end_at_string = end_at.getDate() + '/' + end_at.getMonth() + '/' + end_at.getFullYear() + '  ' + end_at.getHours() + ':' + end_at.getMinutes();\n\n        if (now < end_registration) {\n            if (now > start_registration) {\n                $(\"#tournament-join-div\").append('<div class=\"tournament-perso-list\">\\\n                    <p class=\"tournament-perso-list-name\">' + this.model.get(\"name\") + '</p>\\\n                    <p class=\"tournament-perso-list-prize\">' + this.model.get(\"prize\") + '</p>\\\n                    <div>\\\n                        <p class=\"tournament-perso-list-end_at\">registration start : ' + start_registration_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">registration end : ' + end_registration_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">tournament start : ' + start_at_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">tournament end : ' + end_at_string + '</p>\\\n                    </div>\\\n                    <div class=\"tournament-perso-list-button\">\\\n                        <input class=\"tournament-perso-register-button social-hover\" type=\"button\" value=\"register\"></input>\\\n                    </div>\\\n                </div>')\n            } else {\n                $(\"#tournament-join-div\").append('<div class=\"tournament-perso-list\">\\\n                    <p class=\"tournament-perso-list-name\">' + this.model.get(\"name\") + '</p>\\\n                    <p class=\"tournament-perso-list-prize\">' + this.model.get(\"prize\") + '</p>\\\n                    <div>\\\n                        <p class=\"tournament-perso-list-end_at\">registration start : ' + start_registration_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">registration end : ' + end_registration_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">tournament start : ' + start_at_string + '</p>\\\n                        <p class=\"tournament-perso-list-end_at\">tournament end : ' + end_at_string + '</p>\\\n                    </div>\\\n                    <div class=\"tournament-perso-list-button\">\\\n                        <input class=\"tournament-perso-register-button social-hover\" type=\"button\" value=\"register\"disabled></input>\\\n                    </div>\\\n                </div>')\n            }\n        }\n    }\n})\n\nvar TournamentContentView = Backbone.View.extend({\n    render: function () {\n        var self = this;\n\n        self.matchingPopupIsOpen = false;\n        $(\".Center\").html('<div id=\"tournament-div\">\\\n            <div id=\"tournament-main-div\">\\\n                <h2>Main tournament</h2>\\\n                <input class=\"social-hover\" id=\"start-main-tournament-classed-battle\" type=\"button\" value=\"⚔ classed ⚔\"></input>\\\n                <input class=\"social-hover\" id=\"start-main-tournament-unclassed-battle\" type=\"button\" value=\"⚔ unclassed ⚔\"></input>\\\n            </div>\\\n            <div id=\"tournament-perso-div\">\\\n            </div>\\\n            <div id=\"tournament-join-div\">\\\n            </div>\\\n        </div>')\n\n        $(\"#start-main-tournament-classed-battle\").click(function () {\n            var battle = new Battle({ type_battle: 'main-classed' })\n            battle.save().then(function () {\n                matching_popup.render(self)\n            })\n        })\n\n        $(\"#start-main-tournament-unclassed-battle\").click(function () {\n            var battle = new Battle({ type_battle: 'main-unclassed' })\n            battle.save().then(function () {\n                matching_popup.render(self)\n            })\n        })\n\n        $(\"#start-main-tournament-unclassed-battle\").click(function () {\n        })\n\n        var refresh_tournament_perso = function () {\n            var tournaments = new Tournaments();\n            tournaments.fetch({ data: { perso: \"true\" } }).then(function () {\n                $(\"#tournament-perso-div\").html(\"<h2>My tournaments</h2>\")\n                tournaments.each(function (tournament) {\n                    if (tournament.get(\"main_tournament\") == undefined || tournament.get(\"main_tournament\") == false) {\n                        var tournamentPersoView = new TournamentPersoView({ model: tournament })\n                        tournamentPersoView.render();\n                    }\n                });\n                $(\".tournament-perso-unsubscribe-button\").click(function (e) {\n                    var tournament_name;\n                    if ($(e.currentTarget).prev().val() == \"⚔ battle ⚔\") {\n                        tournament_name = $(e.currentTarget).parent().prev().prev().prev().prev().prev().html()\n                    } else {\n                        tournament_name = $(e.currentTarget).parent().prev().prev().prev().prev().html()\n                    }\n                    var userTourament = new UserTourament({ id: tournament_name })\n                    userTourament.destroy().then(function () {\n                        refresh_tournament_perso();\n                        refresh_tournament_perso_join();\n                    })\n                })\n                $(\".tournament-perso-battle-button\").click(function(e){\n                    var battle = new Battle({ type_battle: 'perso-classed', tournament_name: $(e.currentTarget).parent().prev().prev().prev().prev().prev().html()})\n                    battle.save().then(function () {\n                        matching_popup.render(self)\n                    })\n                })\n            })\n        }\n\n        var refresh_tournament_perso_join = function () {\n            var tournaments = new Tournaments();\n            tournaments.fetch({ data: { join: \"true\" } }).then(function () {\n                $(\"#tournament-join-div\").html(\"<h2>Join tournament</h2>\")\n                tournaments.each(function (tournament) {\n                    if (tournament.get(\"main_tournament\") == undefined || tournament.get(\"main_tournament\") == false) {\n                        var tournamentPersoJoinView = new TournamentPersoJoinView({ model: tournament })\n                        tournamentPersoJoinView.render();\n                    }\n                });\n                $(\".tournament-perso-register-button\").click(function (e) {\n                    var userTourament = new UserTourament({ tournament_name: $(e.currentTarget).parent().prev().prev().prev().html() })\n                    userTourament.save().then(function () {\n                        refresh_tournament_perso();\n                        refresh_tournament_perso_join();\n                    })\n                })\n            })\n        }\n\n        refresh_tournament_perso();\n        refresh_tournament_perso_join();\n\n        return this;\n    }\n})\n\nvar tournamentContent = new TournamentContentView({ el: \".Menu\" })\n\nexport { tournamentContent }"]},"metadata":{},"sourceType":"module"}